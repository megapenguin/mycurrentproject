(this["webpackJsonpretrack-admin"]=this["webpackJsonpretrack-admin"]||[]).push([[7],{448:function(e,t,a){"use strict";a.r(t);a(128);var c=a(62),i=(a(418),a(442)),n=(a(208),a(153)),s=(a(130),a(44)),r=a(33),o=(a(446),a(441)),l=(a(422),a(447)),u=(a(395),a(396)),d=(a(151),a(110)),j=(a(129),a(60)),m=(a(90),a(48)),b=a(5),f=a(443),p=(a(424),a(189)),h=(a(206),a(132)),O=(a(149),a(50)),g=a(78),x=(a(131),a(80)),v=a(0),I=a(445),y=a(453),P=a(444),k=a(91),N=a.n(k),S=a(59),F=a(30),_=a(82);t.default=Object(F.i)((function(e){e.history;var t=Object(v.useContext)(_.a),a=x.a.Title,k=O.a.useForm(),F=Object(g.a)(k,1)[0],w=Object(v.useState)(t.state.userData),C=Object(g.a)(w,2),B=C[0],R=(C[1],Object(v.useState)(null)),L=Object(g.a)(R,2),T=L[0],z=L[1],E=Object(v.useState)("Choose file"),J=Object(g.a)(E,2),U=(J[0],J[1]),V=Object(v.useState)(""),A=Object(g.a)(V,2),D=(A[0],A[1]),G=Object(v.useState)("none"),H=Object(g.a)(G,2),M=(H[0],H[1]);Object(v.useEffect)((function(){F.setFieldsValue({id:B.id,firstName:B.firstName,lastName:B.lastName,email:B.email}),N.a.post("/api/v1/images/search_images",{imageOwnerId:B.id,imageReferenceId:1}).then((function(e){var t=e.data;z(t)})).catch((function(e){return console.log(e)}))}),[]);var q=function(e){console.log(e),e.profilePicture="",N.a.post("/api/v1/users/update_user",e).then((function(e){h.a.success({content:"Successfully updated profile info",okButtonProps:{}})})).catch((function(e){return console.log(e)}))},K={name:"file",action:"/api/v1/images/add_image",headers:{authorization:"authorization-text"},data:{imageOwnerId:B.id,imageReferenceId:1},onChange:function(e){"uploading"!==e.file.status&&console.log("uploading",e.file,e.fileList),"done"===e.file.status?p.b.success("".concat(e.file.name," file uploaded Successfully.")):"error"===e.file.status&&p.b.error("".concat(e.file.name," file upload Failed.")),M(e.file.status),U(e),N.a.post("/api/v1/images/search_images",{imageOwnerId:B.id,imageReferenceId:1}).then((function(e){var t=e.data;z(t)})).catch((function(e){return console.log(e)}))}};return Object(b.jsxs)("div",{children:[Object(b.jsx)(j.a,{children:Object(b.jsx)(S.b,{to:"/instructions",children:Object(b.jsxs)(m.a,{type:"primary",children:[Object(b.jsx)(I.a,{})," Bact to Home"]})})}),Object(b.jsx)(u.a,{children:Object(b.jsxs)(d.a,{children:[" ",Object(b.jsx)(a,{level:2,children:"My Profile Account"})]})}),Object(b.jsxs)(j.a,{children:[Object(b.jsx)(s.a,{span:6,children:Object(b.jsx)(o.a,Object(r.a)(Object(r.a)({},K),{},{onRemove:function(e){N.a.delete("/api/v1/images/delete_folder_image",{params:{fileName:e.response.imagePath,fileId:e.response.id}}).then((function(e){M("removed")})).catch((function(e){return console.log(e)})),D(),p.b.error("File removed Successfully.")},listType:"picture-card",showUploadList:{showPreviewIcon:!1},maxCount:1,children:Object(b.jsxs)(l.b,{children:[Object(b.jsx)(y.a,{}),"Upload Picture"]})}))}),Object(b.jsx)(s.a,{span:16,children:Object(b.jsx)(i.a.Group,{name:"radiogroup",children:Object(b.jsx)(j.a,{gutter:[16,24],children:null==T?"No Pictures":T.map((function(e,t){return Object(b.jsxs)(s.a,{span:6,children:[Object(b.jsx)(n.a,{src:"api/v1/images/".concat([e.smImagePath])},t),Object(b.jsx)(i.a,{value:t,onClick:function(){return t=e.imagePath,void N.a.post("/api/v1/users/update_profile_picture",{id:B.id,profilePicture:t}).then((function(e){h.a.success({content:"Succesfully selected profile picture",okButtonProps:{}})})).catch((function(e){return console.log(e)}));var t},children:"Select"}),Object(b.jsx)(m.a,{icon:Object(b.jsx)(P.a,{}),danger:!0,onClick:function(){return t=e.id,a=e.smImagePath,void N.a.delete("/api/v1/images/delete_folder_image",{params:{fileName:a,fileId:t}}).then((function(e){var a=Object(f.a)(T);a=a.filter((function(e){return e.id!==t})),z(a),h.a.success({content:"Image has been removed",okButtonProps:{}})})).catch((function(e){return console.log(e)}));var t,a}})]},t)}))})})})]}),Object(b.jsxs)(O.a,{layout:"vertical",name:"basic",form:F,initialValues:{remember:!0},onFinish:q,onFinishFailed:function(e){h.a.error({content:"Failed to update profile info",okButtonProps:{style:{borderRadius:"50px"}}})},id:"myForm",children:[Object(b.jsx)(O.a.Item,{label:"Id:",name:"id",children:Object(b.jsx)(c.a,{disabled:!0,bordered:!1})}),Object(b.jsx)(O.a.Item,{label:"First Name: ",name:"firstName",children:Object(b.jsx)(c.a,{})}),Object(b.jsx)(O.a.Item,{label:"Last Name:",name:"lastName",children:Object(b.jsx)(c.a,{})}),Object(b.jsx)(O.a.Item,{label:"Email:",name:"email",children:Object(b.jsx)(c.a,{})}),Object(b.jsx)(j.a,{children:Object(b.jsx)(m.a,{type:"primary",htmlType:"submit",onClick:function(){return q},children:"Save Info"})})]})]})}))}}]);
//# sourceMappingURL=7.28e1820f.chunk.js.map