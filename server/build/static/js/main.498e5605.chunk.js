(this["webpackJsonpretrack-admin"]=this["webpackJsonpretrack-admin"]||[]).push([[1],{154:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return o}));var n=a(5),r=a(78),s=a(0),c=a(33),i=function(e,t){switch(t.type){case"PASS_DATA":return Object(c.a)(Object(c.a)({},e),{},{dataHolder:t.dataHolder});case"LOADING":case"LOAD_DATA":default:return Object(c.a)({},e)}},o=Object(s.createContext)(),l={dataHolder:{}};function u(e){var t=e.children,a=Object(s.useReducer)(i,l),c=Object(r.a)(a,2),u=c[0],j=c[1];return Object(n.jsx)(o.Provider,{value:{dataState:u,passData:function(e){return j({type:"PASS_DATA",dataHolder:e}),{success:!0}}},children:t})}},155:function(e,t,a){},214:function(e,t,a){},389:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(0),s=a.n(r),c=a(22),i=a.n(c),o=(a(214),a(155),a(59)),l=a(30),u=a(33);var j=Object(l.i)((function(e){var t=e.component,a=e.Auth,r=(e.history,e.res);return Object(n.jsx)(l.b,Object(u.a)(Object(u.a)({},r),{},{render:function(e){return a.state.isAuthenticated&&"admin"==a.state.userData.myStatus?Object(n.jsx)(l.a,{to:{pathname:"/",state:{from:e.location}}}):Object(n.jsx)(t,{})}}))}));var d=function(e){var t=e.layout,a=e.component,r=e.Auth,s=e.res;return Object(n.jsx)(l.b,Object(u.a)(Object(u.a)({},s),{},{render:function(e){return r.state.isAuthenticated&&"user"==r.state.userData.myStatus?Object(n.jsx)(t,{children:Object(n.jsx)(a,{})}):Object(n.jsx)(l.a,{to:{pathname:"/",state:{from:e.location}}})}}))},b=a(82);a(78);a(129);var h=a(60),O=(a(130),a(44)),x=(a(151),a(110)),m=(a(90),a(48)),p=(a(149),a(50)),f=(a(128),a(62)),g=a(68),v=a.n(g),y=(a(206),a(132)),A=a(97),w=(a(131),a(80)),k=(a(208),a(153)),P=a.p+"static/media/logo.8aee6a2f.png";var T=function(){return Object(n.jsx)(k.a,{preview:!1,width:120,src:P,style:{borderColor:"white",border:"10px",marginTop:"15px"}})},D=w.a.Title;var N=Object(l.i)((function(e){var t=e.history,a=Object(r.useContext)(b.a),s=function(){var e=Object(A.a)(v.a.mark((function e(n){var r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.authenticate(n);case 2:r=e.sent,s=r.success,r.errorMessage,s?y.a.success({content:"Successfully Log in!"}):y.a.error({content:"Email or Password is incorrect!"}),t.push("/instructions");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"loginCard",children:Object(n.jsx)(h.a,{type:"flex",justify:"center",align:"middle",style:{minHeight:"80vh"},children:Object(n.jsx)(O.a,{children:Object(n.jsx)(x.a,{title:Object(n.jsx)(D,{level:2,children:"O.I.M.S"}),className:"loginCardStyle",children:Object(n.jsxs)("cardBody",{children:[Object(n.jsx)(T,{}),Object(n.jsxs)(p.a,{layout:"vertical",name:"basic",initialValues:{remember:!0},onFinish:s,onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(n.jsx)(p.a.Item,{label:"Email:",name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your Email!"}],children:Object(n.jsx)(f.a,{placeholder:"Email"})}),Object(n.jsx)(p.a.Item,{label:"Password:",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(n.jsx)(f.a.Password,{placeholder:"Password"})}),Object(n.jsx)(p.a.Item,{children:Object(n.jsx)("a",{style:{float:"right"},href:"/register",children:"Create an Account?"})}),Object(n.jsx)(m.a,{type:"primary",htmlType:"submit",children:"LOGIN"})]})]})})})})})})),S=a(91),I=a.n(S),C=w.a.Title;var F=Object(l.i)((function(e){var t=e.history;return Object(n.jsx)("div",{className:"registerCard",children:Object(n.jsx)(h.a,{type:"flex",justify:"center",children:Object(n.jsx)(O.a,{children:Object(n.jsx)(x.a,{title:Object(n.jsx)(C,{level:4,children:"O.I.M.S"}),className:"registerCardStyle",children:Object(n.jsxs)(p.a,{layout:"vertical",name:"basic",initialValues:{remember:!0},onFinish:function(e){e.status="user",e.profilePicture="",I.a.post("/api/v1/users/register",e).then((function(e){t.push("/login")})).catch((function(e){return console.log(e)}))},onFinishFailed:function(e){console.log("fail"),console.log("Failed:",e)},children:[Object(n.jsx)("h3",{children:Object(n.jsx)("b",{children:"Account Registration"})}),Object(n.jsx)(p.a.Item,{label:"First Name:",name:"firstName",rules:[{required:!0,message:"Please input your First Name!"}],children:Object(n.jsx)(f.a,{placeholder:"Firstname"})}),Object(n.jsx)(p.a.Item,{label:"Last Name:",name:"lastName",rules:[{required:!0,message:"Please input your Last Name!"}],children:Object(n.jsx)(f.a,{placeholder:"Lastname"})}),Object(n.jsx)(p.a.Item,{label:"Email:",name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your email!"}],children:Object(n.jsx)(f.a,{placeholder:"Email"})}),Object(n.jsx)(p.a.Item,{name:"password",label:"Password:",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0,children:Object(n.jsx)(f.a.Password,{placeholder:"Password"})}),Object(n.jsx)(p.a.Item,{name:"confirm",label:"Confirm Password:",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}],children:Object(n.jsx)(f.a.Password,{placeholder:"Confirm Password"})}),Object(n.jsx)(p.a.Item,{children:Object(n.jsx)(m.a,{type:"primary",htmlType:"submit",children:"REGISTER"})})]})})})})})})),L=(a(383),a(126)),E=(a(385),a(76)),_=a(391),H=a(392),R=E.a.Header,q=E.a.Content,M=E.a.Footer,B=E.a.Sider;var G=function(e){var t=e.children;return w.a.Title,Object(n.jsxs)(E.a,{children:[Object(n.jsxs)(B,{breakpoint:"lg",collapsedWidth:"0",onBreakpoint:function(e){console.log(e)},onCollapse:function(e,t){console.log(e,t)},children:[Object(n.jsx)("div",{className:"logo"}),Object(n.jsx)(T,{}),Object(n.jsxs)(L.a,{className:"sidebar",theme:"dark",mode:"inline",defaultSelectedKeys:[""],children:[Object(n.jsx)(L.a.Item,{icon:Object(n.jsx)(_.a,{}),children:Object(n.jsx)(o.b,{to:"/instructions",children:"Home"})},"1"),Object(n.jsx)(L.a.Item,{icon:Object(n.jsx)(_.a,{}),children:Object(n.jsx)(o.b,{to:"/profile",children:"My Profile"})},"2")]})]}),Object(n.jsxs)(E.a,{children:[Object(n.jsx)(R,{style:{padding:0,textAlign:"center",backgroundColor:"white",height:"70px"},children:Object(n.jsx)("h1",{style:{color:"black",backgroundColor:"white"},children:Object(n.jsx)(m.a,{onClick:function(){localStorage.clear()},href:"/",type:"danger",icon:Object(n.jsx)(H.a,{}),style:{borderRadius:"10%",margin:"10px",float:"right",textAlign:"center",marginTop:"25px"}})})}),Object(n.jsx)(q,{style:{margin:"24px 16px 0"},children:Object(n.jsx)("div",{className:"site-layout-background",style:{padding:24,minHeight:500},children:t})}),Object(n.jsx)(M,{style:{textAlign:"center"},children:"Ant Design \ufffd2018 Created by Ant UED"})]})]})},z=a(393),K=s.a.lazy((function(){return Promise.all([a.e(0),a.e(5)]).then(a.bind(null,450))}));var U=function(){return Object(n.jsx)("div",{children:Object(n.jsx)(r.Suspense,{fallback:Object(n.jsx)("div",{className:"icons-list",children:Object(n.jsx)(z.a,{spin:!0})}),children:Object(n.jsx)(K,{})})})},V=s.a.lazy((function(){return Promise.all([a.e(0),a.e(6)]).then(a.bind(null,451))}));var J=Object(l.i)((function(e){return Object(l.h)(),Object(n.jsx)("div",{children:Object(n.jsx)(r.Suspense,{fallback:Object(n.jsx)("div",{className:"icons-list",children:Object(n.jsx)(z.a,{spin:!0})}),children:Object(n.jsx)(V,{})})})})),W=s.a.lazy((function(){return Promise.all([a.e(4),a.e(7)]).then(a.bind(null,448))}));var Q=function(){return Object(n.jsx)("div",{children:Object(n.jsx)(r.Suspense,{fallback:Object(n.jsx)("div",{className:"icons-list",children:Object(n.jsx)(z.a,{spin:!0})}),children:Object(n.jsx)(W,{})})})};var X=function(){var e=Object(r.useContext)(b.a);return Object(n.jsx)(s.a.Fragment,{children:!e.state.isLoading&&Object(n.jsx)(o.a,{children:Object(n.jsxs)(l.d,{children:[Object(n.jsx)(j,{Auth:e,path:"/",component:N,exact:!0}),Object(n.jsx)(d,{Auth:e,path:"/instructions",layout:G,component:U,exact:!0}),Object(n.jsx)(d,{Auth:e,layout:G,path:"/instructions/:id",component:J,exact:!0}),Object(n.jsx)(d,{Auth:e,layout:G,path:"/profile",component:Q,exact:!0}),Object(n.jsx)(j,{Auth:e,path:"/register",component:F,exact:!0}),Object(n.jsx)(l.b,{component:function(){return Object(n.jsx)("h1",{children:"URL NOT FOUND"})}})]})})})},Y=function(e){e&&e instanceof Function&&a.e(8).then(a.bind(null,449)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))},Z=a(154);i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(b.b,{children:Object(n.jsx)(Z.b,{children:Object(n.jsx)(X,{})})})}),document.getElementById("root")),Y()},82:function(e,t,a){"use strict";a.d(t,"b",(function(){return O})),a.d(t,"a",(function(){return b}));var n=a(5),r=a(33),s=a(68),c=a.n(s),i=a(97),o=a(78),l=a(0),u=function(e,t){switch(t.type){case"LOAD_TOKEN":return Object(r.a)(Object(r.a)({},e),{},{secureToken:t.secureToken,userData:t.userData,isAuthenticated:!0,isLoading:!1});case"LOADING":return Object(r.a)(Object(r.a)({},e),{},{isLoading:!1});case"LOAD_USER_DATA":default:return Object(r.a)({},e)}},j=a(91),d=a.n(j),b=Object(l.createContext)(),h={secureToken:"",isAuthenticated:!1,userData:{},isLoading:!0};function O(e){var t=e.children,a=Object(l.useReducer)(u,h),s=Object(o.a)(a,2),j=s[0],O=s[1],x=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,d.a.post("/api/v1/auths/",{token:t},{headers:{Authorization:"Bearer ".concat(t)}}).catch((function(e){console.log(e),localStorage.removeItem("token")}));case 3:a=e.sent,O(a?{type:"LOAD_TOKEN",secureToken:a.data.token,userData:a.data.userData}:{type:"LOADING"});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){x()}),[]);var m=function(){var e=Object(i.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/v1/auths/auth_login",Object(r.a)({},t)).catch((function(e){return e.response}));case 2:if(422!==(a=e.sent).status){e.next=7;break}return e.abrupt("return",{success:!1,errorMassage:"Invalid email or password"});case 7:if(200!==a.status){e.next=11;break}return localStorage.setItem("token",a.data.token),O({type:"LOAD_TOKEN",secureToken:a.data.secureToken,userData:a.data.userData}),e.abrupt("return",{success:!0});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(b.Provider,{value:{state:j,authenticate:m},children:t})}}},[[389,2,3]]]);
//# sourceMappingURL=main.498e5605.chunk.js.map