(this["webpackJsonpretrack-admin"]=this["webpackJsonpretrack-admin"]||[]).push([[6],{445:function(e,t,n){"use strict";var c=n(0),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},a=n(77),i=function(e,t){return c.createElement(a.a,Object.assign({},e,{ref:t,icon:s}))};i.displayName="LeftOutlined";t.a=c.forwardRef(i)},451:function(e,t,n){"use strict";n.r(t);n(399);var c=n(398),s=(n(130),n(44)),a=(n(395),n(396)),i=(n(129),n(60)),o=(n(90),n(48)),r=n(5),l=n(78),u=(n(131),n(80)),d=n(0),j=n(445),b=(n(149),n(50)),O=(n(128),n(62)),m=(n(206),n(132)),f=n(452),p=n(91),h=n.n(p);var x=function(e){var t=Object(d.useState)(!1),n=Object(l.a)(t,2),c=n[0],s=n[1],a=Object(d.useState)(!1),i=Object(l.a)(a,2),u=i[0],j=i[1],p=Object(d.useState)(!1),x=Object(l.a)(p,2),v=(x[0],x[1]),I=Object(d.useState)("Choose file"),g=Object(l.a)(I,2),y=(g[0],g[1],Object(d.useState)()),C=Object(l.a)(y,2),k=(C[0],C[1],Object(d.useState)("0")),S=Object(l.a)(k,2),N=S[0],F=S[1];Object(d.useEffect)((function(){null===e.stepInfo?F("0"):e.stepInfo.map((function(e){return F(e.stepNumber),console.log(N)}))}),[c]);var T=function(){v(!0),s(!1)},w=function(t){console.log(t),t.titleId=e.info.id,t.stepNumber=N+1,j(!0),v(!1),setTimeout((function(){s(!1),j(!1)}),2e3),h.a.post("/api/v1/instructions/add_instruction",t).then((function(e){m.a.success({content:"Successfully added instruction",okButtonProps:{}})})).catch((function(e){return console.log(e)}))};return Object(r.jsxs)("div",{children:[Object(r.jsxs)(o.a,{type:"primary",className:"modal-button-add",onClick:function(){s(!0)},children:[Object(r.jsxs)("span",{className:"desktop-view",children:[Object(r.jsx)(f.a,{})," Add Steps"]}),Object(r.jsx)("span",{className:"mobile-view",children:Object(r.jsx)(f.a,{})})]}),Object(r.jsx)(m.a,{title:"Write Instructions",visible:c,confirmLoading:u,onOk:w,onCancel:T,afterClose:function(){e.afterClosing()},destroyOnClose:!0,footer:[Object(r.jsx)(o.a,{className:"modal-button",onClick:T,children:"Cancel"},"back"),Object(r.jsx)(o.a,{form:"myForm",htmlType:"submit",type:"primary",className:"modal-button",loading:u,onClick:w,children:"Add"},"submit")],children:Object(r.jsx)(b.a,{layout:"vertical",name:"basic",initialValues:{remember:!0},onFinish:w,onFinishFailed:function(e){m.a.error({content:"Failure to add instruction",okButtonProps:{style:{borderRadius:"50px"}}}),setTimeout((function(){s(!0),j(!1)}),2e3)},id:"myForm",children:Object(r.jsx)(b.a.Item,{label:"Instruction",name:"stepInstruction",rules:[{required:!0,message:"Please input title!"}],children:Object(r.jsx)(O.a.TextArea,{placeholder:"Write instruction here..."})})})})]})};var v=function(e){var t=Object(d.useState)(!1),n=Object(l.a)(t,2),c=n[0],s=n[1],a=Object(d.useState)(!1),i=Object(l.a)(a,2),u=i[0],j=i[1],p=Object(d.useState)(!1),x=Object(l.a)(p,2),v=(x[0],x[1]),I=Object(d.useState)("Choose file"),g=Object(l.a)(I,2),y=(g[0],g[1],Object(d.useState)()),C=Object(l.a)(y,2),k=(C[0],C[1],b.a.useForm()),S=Object(l.a)(k,1)[0],N=function(){v(!0),s(!1)},F=function(e){console.log(e),j(!0),v(!1),setTimeout((function(){s(!1),j(!1)}),2e3),h.a.post("/api/v1/instructions/update_instruction",e).then((function(e){m.a.success({content:"Successfully updated instruction",okButtonProps:{}})})).catch((function(e){return console.log(e)}))};return Object(r.jsxs)("div",{children:[Object(r.jsxs)(o.a,{type:"primary",className:"modal-button-add",onClick:function(){S.setFieldsValue({id:e.stepInfo.id,titleId:e.stepInfo.titleId,stepNumber:e.stepInfo.stepNumber,stepInstruction:e.stepInfo.stepInstruction}),s(!0)},children:[Object(r.jsxs)("span",{className:"desktop-view",children:[Object(r.jsx)(f.a,{})," Update"]}),Object(r.jsx)("span",{className:"mobile-view",children:Object(r.jsx)(f.a,{})})]}),Object(r.jsx)(m.a,{title:"Edit Instructions",visible:c,confirmLoading:u,onOk:F,onCancel:N,afterClose:function(){e.afterClosing()},destroyOnClose:!0,footer:[Object(r.jsx)(o.a,{className:"modal-button",onClick:N,children:"Cancel"},"back"),Object(r.jsx)(o.a,{form:"myForm",htmlType:"submit",type:"primary",className:"modal-button",loading:u,onClick:F,children:"Update"},"submit")],children:Object(r.jsxs)(b.a,{layout:"vertical",name:"basic",form:S,initialValues:{remember:!0},onFinish:F,onFinishFailed:function(e){m.a.error({content:"Failure to update instruction",okButtonProps:{style:{borderRadius:"50px"}}}),setTimeout((function(){s(!0),j(!1)}),2e3)},id:"myForm",children:[Object(r.jsx)(b.a.Item,{label:"Id:",name:"id",children:Object(r.jsx)(O.a,{disabled:!0,bordered:!1})}),Object(r.jsx)(b.a.Item,{label:"Title Id: ",name:"titleId",children:Object(r.jsx)(O.a,{disabled:!0,bordered:!1})}),Object(r.jsx)(b.a.Item,{label:"Step Number:",name:"stepNumber",children:Object(r.jsx)(O.a,{disabled:!0,bordered:!1})}),Object(r.jsx)(b.a.Item,{label:"Instruction",name:"stepInstruction",rules:[{required:!0,message:"Please input title!"}],children:Object(r.jsx)(O.a.TextArea,{})})]})})]})},I=n(154),g=n(30),y=n(59);t.default=Object(g.i)((function(e){e.history;var t=Object(d.useContext)(I.a),n=u.a.Title,b=Object(d.useState)(t.dataState.dataHolder),O=Object(l.a)(b,2),m=O[0],f=(O[1],Object(d.useState)([])),p=Object(l.a)(f,2),C=p[0],k=p[1],S=Object(d.useState)(null),N=Object(l.a)(S,2),F=N[0],T=N[1],w=Object(d.useState)(),B=Object(l.a)(w,2),P=B[0],_=(B[1],Object(g.g)());Object(d.useEffect)((function(){P=_.location.pathname.split("/instructions/"),h.a.post("/api/v1/titles/title",{value:P[1]}).then((function(e){var t=e.data;T(t)})),h.a.post("/api/v1/instructions/search_instructions",{value:P[1]}).then((function(e){var t=e.data;k(t)})).catch((function(e){return console.log(e)}))}),[]);var A=function(){console.log("modal closed"),h.a.post("/api/v1/instructions/search_instructions",{value:m.id}).then((function(e){var t=e.data;k(t)})).catch((function(e){return console.log(e)})),console.log(C)};return Object(r.jsxs)("div",{children:[Object(r.jsx)(i.a,{children:Object(r.jsx)(y.b,{to:"/instructions",children:Object(r.jsxs)(o.a,{type:"primary",onClick:function(){},children:[Object(r.jsx)(j.a,{})," Bact to Home"]})})}),Object(r.jsx)(a.a,{children:Object(r.jsx)(n,{level:2,children:null==F?" ":F[0].title})}),Object(r.jsx)(i.a,{children:Object(r.jsx)(x,{info:m,stepInfo:C,afterClosing:A})}),Object(r.jsx)(a.a,{}),Object(r.jsx)(c.b,{size:"large",header:Object(r.jsx)(n,{level:2,children:"Steps"}),footer:Object(r.jsx)("div",{children:"Footer"}),bordered:!0,dataSource:C,renderItem:function(e){return Object(r.jsxs)(c.b.Item,{children:[Object(r.jsx)(s.a,{children:e.stepNumber}),Object(r.jsx)(s.a,{flex:"auto",children:e.stepInstruction}),Object(r.jsx)(s.a,{children:Object(r.jsx)(v,{info:m,stepInfo:e,afterClosing:A})}),Object(r.jsx)(s.a,{children:Object(r.jsx)(o.a,{type:"danger",onClick:function(){return t=e.id,void h.a.delete("/api/v1/instructions/delete_instruction",{params:{id:t}}).then((function(e){h.a.post("/api/v1/instructions/search_instructions",{value:m.id}).then((function(e){var t=e.data;k(t)}))})).catch((function(e){return console.log(e)}));var t},children:"Delete"})})]})}}),Object(r.jsx)(a.a,{})]})}))}}]);
//# sourceMappingURL=6.8057c9f3.chunk.js.map